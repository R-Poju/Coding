åœ¨ C++ ä¸­ï¼Œ`std::bind`æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å‡½æ•°é€‚é…å™¨ï¼ˆfunction adapterï¼‰ï¼Œä½äº `<functional>`å¤´æ–‡ä»¶ä¸­ã€‚å®ƒç”¨äº**å°†ä¸€ä¸ªå¯è°ƒç”¨å¯¹è±¡ä¸å…¶å‚æ•°ç»‘å®š**ï¼Œç”Ÿæˆä¸€ä¸ªæ–°çš„å¯è°ƒç”¨å¯¹è±¡ã€‚è¿™ä¸ªæ–°å¯¹è±¡å¯ä»¥å»¶è¿Ÿæ‰§è¡ŒåŸå‡½æ•°ï¼Œæˆ–ä¿®æ”¹å‚æ•°ä¼ é€’æ–¹å¼ã€‚

------

### ä¸€ã€æ ¸å¿ƒåŠŸèƒ½

1. 

   **å‚æ•°é¢„ç»‘å®š**

   å›ºå®šéƒ¨åˆ†æˆ–å…¨éƒ¨å‚æ•°å€¼

2. 

   **å‚æ•°é‡æ’åº**

   ä½¿ç”¨å ä½ç¬¦è°ƒæ•´å‚æ•°é¡ºåº

3. 

   **é€‚é…æˆå‘˜å‡½æ•°**

   ç»‘å®šç±»çš„æˆå‘˜å‡½æ•°ä¸å¯¹è±¡å®ä¾‹

4. 

   **å‡½æ•°ç»„åˆ**

   åˆ›å»ºæ›´å¤æ‚çš„å‡½æ•°è°ƒç”¨é“¾

------

### äºŒã€åŸºæœ¬è¯­æ³•

```cpp
#include <functional>

auto bound_fn = std::bind(
    callable,          // åŸå§‹å¯è°ƒç”¨å¯¹è±¡ï¼ˆå‡½æ•°/å‡½æ•°å¯¹è±¡/æˆå‘˜å‡½æ•°ï¼‰
    arg1, arg2, ...,   // ç»‘å®šçš„å‚æ•°ï¼ˆå€¼æˆ–å ä½ç¬¦ï¼‰
    std::placeholders::_1,  // å ä½ç¬¦ï¼ˆè¡¨ç¤ºæœªæ¥ä¼ å…¥çš„ç¬¬1ä¸ªå‚æ•°ï¼‰
    std::placeholders::_2   // å ä½ç¬¦ï¼ˆè¡¨ç¤ºæœªæ¥ä¼ å…¥çš„ç¬¬2ä¸ªå‚æ•°ï¼‰
);
```

------

### ä¸‰ã€å…³é”®ç»„ä»¶

#### 1. **å ä½ç¬¦ (Placeholders)**

å®šä¹‰äº `std::placeholders`å‘½åç©ºé—´ï¼š

```cpp
using namespace std::placeholders;  // ç®€åŒ–å†™æ³•

_1  // è¡¨ç¤ºæ–°å‡½æ•°çš„ç¬¬1ä¸ªå‚æ•°
_2  // è¡¨ç¤ºæ–°å‡½æ•°çš„ç¬¬2ä¸ªå‚æ•°
...
```

#### 2. **ç»‘å®šå€¼ vs ç»‘å®šå ä½ç¬¦**

| ç±»å‹         | ç¤ºä¾‹                      | æ•ˆæœ                    |
| ------------ | ------------------------- | ----------------------- |
| **å›ºå®šå€¼**   | `bind(func, 42, _1)`      | ç¬¬ä¸€ä¸ªå‚æ•°å›ºå®šä¸º42      |
| **å ä½ç¬¦**   | `bind(func, _2, _1)`      | äº¤æ¢å‚æ•°é¡ºåº            |
| **æ··åˆç»‘å®š** | `bind(func, "hello", _1)` | ç¬¬ä¸€ä¸ªå‚æ•°å›ºå®šä¸º"hello" |

------

### å››ã€ä½¿ç”¨ç¤ºä¾‹

#### ç¤ºä¾‹ 1ï¼šç»‘å®šæ™®é€šå‡½æ•°

```cpp
#include <functional>
#include <iostream>

int add(int a, int b) { return a + b; }

int main() {
    // ç»‘å®šå›ºå®šå‚æ•°ï¼šadd(10, ?)
    auto add10 = std::bind(add, 10, _1);
    std::cout << add10(5);  // è¾“å‡º15 (10+5)

    // äº¤æ¢å‚æ•°é¡ºåºï¼šadd(?, ?) â†’ add(b, a)
    auto subtract = std::bind(add, _2, _1); 
    std::cout << subtract(3, 8);  // è¾“å‡º11 (8+3)
}
```

#### ç¤ºä¾‹ 2ï¼šç»‘å®šæˆå‘˜å‡½æ•°

```cpp
struct Calculator {
    int multiply(int a, int b) { return a * b; }
};

int main() {
    Calculator calc;
    
    // ç»‘å®šæˆå‘˜å‡½æ•° + å¯¹è±¡å®ä¾‹
    auto multBy2 = std::bind(
        &Calculator::multiply,  // æˆå‘˜å‡½æ•°æŒ‡é’ˆ
        &calc,                   // å¯¹è±¡å®ä¾‹æŒ‡é’ˆ
        _1, 2                    // ç¬¬ä¸€ä¸ªå‚æ•°å¯å˜ï¼Œç¬¬äºŒä¸ªå›ºå®šä¸º2
    );
    
    std::cout << multBy2(5);  // è¾“å‡º10 (5 * 2)
}
```

#### ç¤ºä¾‹ 3ï¼šç»‘å®šå¸¦å¼•ç”¨çš„å‚æ•°

```cpp
void increment(int& x) { ++x; }

int main() {
    int n = 0;
    
    // ä½¿ç”¨ std::ref ä¼ é€’å¼•ç”¨
    auto inc = std::bind(increment, std::ref(n));
    inc();  // n å˜ä¸º1
    
    // é”™è¯¯å†™æ³•ï¼ˆå€¼ä¼ é€’ï¼‰ï¼š
    // auto bad_inc = std::bind(increment, n);  // ç¼–è¯‘é”™è¯¯ï¼
}
```

#### ç¤ºä¾‹ 4ï¼šå‚æ•°é‡æ’åº

```cpp
void printThree(int a, int b, int c) {
    std::cout << a << ", " << b << ", " << c;
}

int main() {
    using namespace std::placeholders;
    
    // åŸå‚æ•°é¡ºåºï¼ša,b,c â†’ æ–°é¡ºåºï¼šc,a,b
    auto reordered = std::bind(printThree, _3, _1, _2);
    reordered(1, 2, 3);  // è¾“å‡ºï¼š3, 1, 2
}
```

------

### äº”ã€ä¸ Lambda çš„å¯¹æ¯”

| ç‰¹æ€§           | `std::bind`                  | Lambda è¡¨è¾¾å¼          |
| -------------- | ---------------------------- | ---------------------- |
| **å¯è¯»æ€§**     | å¤æ‚ç»‘å®šæ—¶ä»£ç æ™¦æ¶©           | æ›´ç›´è§‚æ¸…æ™°             |
| **ç±»å‹æ¨å¯¼**   | è¿”å›ç±»å‹å¤æ‚ï¼ˆ`std::_Bind`ï¼‰ | è‡ªåŠ¨æ¨å¯¼ç±»å‹           |
| **æ€§èƒ½**       | è½»å¾®é—´æ¥è°ƒç”¨å¼€é”€             | é€šå¸¸å¯å†…è”ä¼˜åŒ–         |
| **C++11 æ”¯æŒ** | å…¨æ”¯æŒ                       | å…¨æ”¯æŒ                 |
| **å‚æ•°ä¿®æ”¹**   | éœ€ç”¨ `std::ref`/`std::cref`  | ç›´æ¥æ•è·å¼•ç”¨ `[&]`     |
| **é€‚ç”¨åœºæ™¯**   | ç®€å•ç»‘å®š/å…¼å®¹æ—§ä»£ç           | å¤æ‚é€»è¾‘/ç°ä»£ C++ é¦–é€‰ |

**ç­‰æ•ˆå®ç°å¯¹æ¯”ï¼š**

```cpp
// ä½¿ç”¨ bind
auto add10_bind = std::bind(add, 10, _1);

// ç­‰æ•ˆ lambda
auto add10_lambda = [](int x) { return add(10, x); };
```

------

### å…­ã€é«˜çº§æŠ€å·§

#### 1. åµŒå¥—ç»‘å®š

```cpp
auto fn = std::bind(
    std::bind(g, _1, 5),  // å†…å±‚ç»‘å®šï¼šg(?, 5)
    _2                   // å¤–å±‚ç»‘å®šï¼šç»“æœä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°
);
// ç­‰ä»·äºï¼šg(_2, 5)
```

#### 2. ç»‘å®šé‡è½½å‡½æ•°

```cpp
void foo(int) {}
void foo(double) {}

// æ˜ç¡®æŒ‡å®šé‡è½½ç‰ˆæœ¬
auto bound_foo = std::bind(
    static_cast<void(*)(int)>(foo), 
    _1
);
```

#### 3. ç»‘å®šå‡½æ•°å¯¹è±¡

```cpp
struct Multiplier {
    int operator()(int a, int b) const { return a * b; }
};

auto timesTwo = std::bind(Multiplier{}, _1, 2);
```

------

### ä¸ƒã€æ³¨æ„äº‹é¡¹

1. 

   **æ€§èƒ½è€ƒé‡**

   ç›¸æ¯”ç›´æ¥è°ƒç”¨æœ‰è½»å¾®å¼€é”€ï¼ˆçº¦ 2-3 å€æ…¢ï¼‰ï¼Œæ€§èƒ½æ•æ„Ÿåœºæ™¯å»ºè®®ç”¨ lambda

2. 

   **ç©ºæ‚¬å¼•ç”¨**

   ç»‘å®šå¼•ç”¨å‚æ•°æ—¶éœ€ç¡®ä¿ç”Ÿå‘½å‘¨æœŸï¼š

   ```cpp
   auto make_binder() {
       int local = 42;
       return std::bind(func, std::ref(local));  // å±é™©ï¼local å°†é”€æ¯
   }
   ```

3. 

   **C++11 é™åˆ¶**

   ä¸æ”¯æŒæ³›å‹ lambdaï¼Œå¤æ‚åœºæ™¯å—é™

4. 

   **ç§»åŠ¨è¯­ä¹‰**

   C++14 å‰æ— æ³•å®Œç¾è½¬å‘å³å€¼ï¼ˆC++14 çš„ `std::bind`æ”¹è¿›ï¼‰

------

### å…«ã€ç°ä»£æ›¿ä»£æ–¹æ¡ˆ (C++11 åŠä»¥å)

1. 

   **Lambda è¡¨è¾¾å¼**ï¼ˆé¦–é€‰ï¼‰ï¼š

   ```cpp
   // æ›¿ä»£ bind(add, 10, _1)
   auto add10 = [](int x) { return add(10, x); };
   ```

2. 

   **std::invoke**ï¼ˆC++17ï¼‰ï¼š

   ```cpp
   std::invoke(add, 10, 20);  // é€šç”¨è°ƒç”¨
   ```

------

### ä¹ã€å®Œæ•´ç¤ºä¾‹

```cpp
#include <iostream>
#include <functional>
using namespace std;
using namespace std::placeholders;

void greet(const string& name, const string& title) {
    cout << "Hello, " << title << " " << name << "!\n";
}

int main() {
    // ç»‘å®šå›ºå®šæ ‡é¢˜
    auto greetDr = bind(greet, _1, "Dr.");
    greetDr("Smith");  // Hello, Dr. Smith!

    // äº¤æ¢å‚æ•°é¡ºåº
    auto formalGreet = bind(greet, _2, _1);
    formalGreet("Prof.", "Williams");  // Hello, Prof. Williams!

    // ç»‘å®šæˆå‘˜å‡½æ•°
    struct Person {
        string name;
        void sayHi() { cout << "Hi, I'm " << name << "\n"; }
    };
    Person alice{"Alice"};
    auto aliceGreeter = bind(&Person::sayHi, &alice);
    aliceGreeter();  // Hi, I'm Alice
}
```

------

### æ€»ç»“

**`std::bind`çš„æ ¸å¿ƒä»·å€¼**ï¼š

- 

  åŠ¨æ€è°ƒæ•´å‡½æ•°ç­¾åï¼ˆå‚æ•°æ•°é‡/é¡ºåºï¼‰

- 

  éƒ¨åˆ†åº”ç”¨ï¼ˆPartial Applicationï¼‰æŠ€æœ¯å®ç°

- 

  æ¡¥æ¥æ—§å¼ C++ ä»£ç ä¸ç°ä»£å›è°ƒéœ€æ±‚

**é€‚ç”¨åœºæ™¯**ï¼š

- 

  å›è°ƒå‡½æ•°æ³¨å†Œï¼ˆGUI/äº‹ä»¶ç³»ç»Ÿï¼‰

- 

  ç»‘å®šçº¿ç¨‹å‡½æ•°å‚æ•°

- 

  é€‚é…ä¸åŒç­¾åçš„æ¥å£

- 

  å…¼å®¹ C++98/03 é—ç•™ä»£ç 



ğŸ’¡ ç°ä»£ C++ å¼€å‘ä¸­ï¼Œ**ä¼˜å…ˆè€ƒè™‘ Lambda è¡¨è¾¾å¼**ï¼Œä»…åœ¨éœ€è¦åŠ¨æ€ç»‘å®šæˆ–å…¼å®¹æ—§ä»£ç æ—¶ä½¿ç”¨ `std::bind`ã€‚ä¸¤è€…ç»“åˆä½¿ç”¨èƒ½æ˜¾è‘—æå‡ä»£ç çµæ´»æ€§ã€‚